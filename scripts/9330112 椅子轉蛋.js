var status = -1;
var GachItem = new Array(
  [3010006, 20, true],
  [3010014, 30, true],
  [3010020, 40, true]
);
var itemList = new Array(
	3015525,
	3015524,
	3015373,
	3015378,
	3015379,
	3015339,
	3015340,
	3015331,
	3015332,
	3015315,
	3015330,
	3015306,
	3015312,
	3015314,
	3015303,
	3015305,
	3015297,
	3015300,
	3015287,
	3015288,
	3015279,
	3015286,
	3015264,
	3015275,
	3015277,
	3015244,
	3015245,
	3015240,
	3015243,
	3015238,
	3015210,
	3015223,
	3015234,
	3015167,
	3015172,
	3015173,
	3015145,
	3015155,
	3015121,
	3015123,
	3015124,
	3015118,
	3015119,
	3015120,
	3015115,
	3015116,
	3015117,
	3015112,
	3015114,
	3015107,
	3015091,
	3015092,
	3015089,
	3015053,
	3015079,
	3015043,
	3015045,
	3015051,
	3015032,
	3015033,
	3015041,
	3015042,
	3015011,
	3015012,
	3015030,
	3015001,
	3015003,
	3015009,
	3015010,
	3015428,
	3015429,
	3015711,
	3015798,
	3015801,
	3015863,
	3015436,
	3015797,
	3010117,
	3010118,
	3010137,
	3010136,
	3010002,
	3010003,
	3010004,
	3010005,
	3010006,
	3010007,
	3010008,
	3010009,
	3010010,
	3010012,
	3010013,
	3010014,
	3010015,
	3010017,
	3010016,
	3010018,
	3010019,
	3010020,
	3010021,
	3010022,
	3010023,
	3010024,
	3010025,
	3010026,
	3010027,
	3010028,
	3010029,
	3010030,
	3010031,
	3010032,
	3010033,
	3010034,
	3010035,
	3010036,
	3010037,
	3010038,
	3010039,
	3010040,
	3010041,
	30100422,
	3010043,
	3010044,
	3010045,
	3010046,
	3010047,
	3010048,
	3010049,
	3010050,
	3010051,
	3010052,
	3010053,
	3010054,
	3010055,
	3010056,
	3010057,
	3010058,
	3010059,
	3010060,
	3010061,
	3010062,
	3010063,
	3010064,
	3010065,
	3010066,
	3010067,
	3010068,
	3010069,
	3010070,
	3010071,
	3010072,
	3010073,
	3010074,
	3010075,
	3010077,
	3010076,
	3010078,
	3010079,
	3010080,
	3010081,
	3010082,
	3010083,
	3010084,
	3010085,
	3010086,
	3010087,
	3010088,
	3010089,
	3010090,
	3010091,
	3010092,
	3010093,
	3010094,
	3010095,
	3010096,
	3010097,
	3010098,
	3010099,
	3010100,
	3010101,
	3010102,
	3010103,
	3010104,
	3010105,
	3010106,
	3012002,
	3012003,
	3012004,
	3012005,
	3012006,
	3012007,
	3012008,
	3012009,
	3010110,
	3010111,
	3010112,
	3010113,
	3010114,
	3010115
);
//物品ID,機率,是否上廣
function action(mode, type, selection) {
  if (mode == 1) {
    status++;
  } else {
    cm.dispose();
    return;
  }
  if (status == 0) {
    if (cm.haveItem(5220000, 1)) {
      cm.sendYesNo(
        "您身上有#b#t5220000##i5220000##k可以進行轉蛋。\r\n你確定要使用 #b椅子轉蛋機#k 進行轉蛋嗎?"
      );
    } else {
      cm.sendOk("不好意思!您沒有#b#t5220000##i5220000##k。");
      cm.safeDispose();
    }
  } else if (status == 1) {
    var item;
    var gain = false;
    for (var i = 0; i < GachItem.length; i++) {
      var GItem = GachItem[i];
      if (Math.floor(Math.random() * GItem[1]) == 0) {
        item = cm.gainGachaponItem(GItem[0], 1, GItem[2]);
        gain = true;
        break;
      }
    }
    if (!gain) {
      item = cm.gainGachaponItem(
        itemList[Math.floor(Math.random() * itemList.length)],
        1
      );
    }

    if (item != -1) {
      cm.gainItem(5220000, -1);
      cm.sendOk("您已獲得 #b#t" + item + "##i" + item + "##k");
    } else {
      cm.sendOk("檢查一下背包是否已滿。");
    }
    cm.safeDispose();
  }
}
