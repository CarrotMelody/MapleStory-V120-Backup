var status = -1;
var itemList = new Array(
	2049301,
	2049400,
	2049401,
	2040211,
	2040212,
	2044802,
	2044902,
	2340000,
	2040000,
	2040001,
	2040002,
	2040003,
	2040004,
	2040005,
	2040006,
	2040007,
	2040008,
	2040009,
	2040010,
	2040011,
	2040012,
	2040013,
	2040014,
	2040015,
	2040017,
	2040016,
	2040018,
	2040019,
	2040020,
	2040021,
	2040022,
	2040023,
	2040024,
	2040025,
	2040026,
	2040027,
	2040028,
	2040029,
	2040030,
	2040031,
	2040032,
	2040033,
	2040034,
	2040035,
	2040036,
	2040037,
	2040038,
	2040039,
	2040040,
	2040041,
	2040042,
	2040043,
	2040044,
	2040100,
	2040101,
	2040102,
	2040103,
	2040104,
	2040105,
	2040106,
	2040107,
	2040108,
	2040109,
	2040200,
	2040201,
	2040202,
	2040203,
	2040204,
	2040205,
	2040206,
	2040207,
	2040208,
	2040209,
	2040300,
	2040301,
	2040302,
	2040303,
	2040304,
	2040305,
	2040306,
	2040307,
	2040308,
	2040309,
	2040310,
	2040311,
	2040312,
	2040313,
	2040314,
	2040315,
	2040316,
	2040317,
	2040318,
	2040319,
	2040320,
	2040321,
	2040322,
	2040323,
	2040324,
	2040325,
	2040326,
	2040327,
	2040328,
	2040329,
	2040330,
	2040331,
	2040332,
	2040333,
	2040334,
	2040335,
	2040336,
	2040337,
	2040338,
	2040339,
	2040340,
	2040400,
	2040401,
	2040402,
	2040403,
	2040404,
	2040405,
	2040406,
	2040407,
	2040408,
	2040409,
	2040410,
	2040411,
	2040412,
	2040413,
	2040414,
	2040415,
	2040416,
	2040417,
	2040418,
	2040419,
	2040420,
	2040421,
	2040422,
	2040423,
	2040424,
	2040425,
	2040426,
	2040427,
	2040428,
	2040429,
	2040430,
	2040431,
	2040432,
	2040433,
	2040434,
	2040435,
	2040436,
	2040500,
	2040501,
	2040502,
	2040503,
	2040504,
	2040505,
	2040507,
	2040506,
	2040508,
	2040509,
	2040510,
	2040511,
	2040512,
	2040513,
	2040514,
	2040515,
	2040516,
	2040517,
	2040518,
	2040519,
	2040520,
	2040521,
	2040522,
	2040523,
	2040524,
	2040525,
	2040526,
	2040527,
	2040528,
	2040529,
	2040530,
	2040531,
	2040532,
	2040533,
	2040534,
	2040538,
	2040539,
	2040540,
	2040541,
	2040600,
	2040601,
	2040602,
	2040603,
	2040604,
	2040605,
	2040606,
	2040607,
	2040608,
	2040609,
	2040610,
	2040611,
	2040612,
	2040613,
	2040614,
	2040615,
	2040616,
	2040617,
	2040618,
	2040619,
	2040620,
	2040621,
	2040622,
	2040623,
	2040624,
	2040625,
	2040626,
	2040627,
	2040628,
	2040629,
	2040630,
	2040631,
	2040632,
	2040633,
	2040634,
	2040635,
	2040636,
	2040700,
	2040701,
	2040702,
	2040703,
	2040704,
	2040705,
	2040706,
	2040707,
	2040708,
	2040709,
	2040710,
	2040711,
	2040712,
	2040713,
	2040714,
	2040715,
	2040716,
	2040717,
	2040718,
	2040719,
	2040720,
	2040721,
	2040722,
	2040723,
	2040740,
	2040800,
	2040801,
	2040802,
	2040803,
	2040804,
	2040805,
	2040806,
	2040807,
	2040808,
	2040809,
	2040810,
	2040811,
	2040812,
	2040813,
	2040814,
	2040815,
	2040816,
	2040817,
	2040818,
	2040819,
	2040820,
	2040821,
	2040822,
	2040823,
	2040824,
	2040825,
	2040826,
	2040827,
	2040828,
	2040829,
	2040830,
	2040831,
	2040832,
	2041000,
	2041001,
	2041002,
	2041003,
	2041004,
	2041005,
	2041006,
	2041007,
	2041008,
	2041009,
	2041010,
	2041011,
	2041012,
	2041013,
	2041014,
	2041015,
	2041016,
	2041017,
	2041018,
	2041019,
	2041020,
	2041021,
	2041022,
	2041023,
	2041024,
	2041025,
	2041026,
	2041027,
	2041028,
	2041029,
	2041042,
	2041045,
	2041043,
	2041044,
	2041100,
	2041101,
	2041102,
	2041103,
	2041104,
	2041105,
	2041106,
	2041107,
	2041108,
	2041109,
	2041110,
	2041111,
	2041120,
	2041121,
	2041122,
	2041123,
	2041124,
	2041125,
	2041126,
	2041127,
	2041128,
	2041129,
	2041130,
	2041131,
	2041301,
	2041300,
	2041302,
	2041303,
	2041304,
	2041305,
	2041306,
	2041307,
	2041308,
	2041309,
	2041310,
	2041311
);

function start() {
  status = -1;
  action(1, 0, 0);
}

function action(mode, type, selection) {
  if (mode == 1) {
    status++;
  } else {
    cm.dispose();
    return;
  }
  if (status == 0) {
    if (cm.haveItem(5220000)) {
      cm.sendYesNo(
        "你身上有#b#t5220000##i5220000##k可以進行卷軸轉蛋\r\n你確定要使用 #b卷軸轉蛋機#k 嗎？"
      );
    } else {
      cm.sendOk("你好像沒有#b#t5220000##i5220000##k哦！");
      cm.safeDispose();
    }
  } else if (status == 1) {
    var item;
    if (Math.floor(Math.random() * 300) == 0) {
      item = cm.gainGachaponItem(1102042, 1);
    } else {
      item = cm.gainGachaponItem(
        itemList[Math.floor(Math.random() * itemList.length)],
        1
      );
    }

    if (item != -1) {
      cm.gainItem(5220000, -1);
      cm.sendOk("恭喜你你抽到 #b#t" + item + "##i" + item + "##k");
    } else {
      cm.sendOk("檢查一下背包是否已滿。");
    }
    cm.safeDispose();
  }
}
